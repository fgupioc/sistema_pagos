<div class="card">
  <div class="card-header">
    <h4>Información del crédito</h4>
  </div>
  <div class="card-body">
    <section *ngIf="credito && cartera && socio">
      <div class="row">
        <div class="col-12 col-md-3">
          <div class="form-group">
            <label>Cartera</label>
            <input type="text" class="form-control" [value]="cartera.nombre" disabled>
          </div>
        </div>
        <div class="col-12 col-md-5">
          <div class="form-group">
            <label>Cliente</label>
            <input type="text" class="form-control" [value]="credito.alias" disabled>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="form-group">
            <label>T. Documento</label>
            <input type="text" class="form-control" [value]="typeDocumentDescription" disabled>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="form-group">
            <label>N. Documento</label>
            <input type="text" class="form-control" [value]="documentNumber" disabled>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-group">
            <label>Etapa</label>
            <input type="text" class="form-control" [value]="regla" disabled>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="form-group">
            <label>N. Crédito</label>
            <input type="text" class="form-control" [value]="credito.nroCredito" disabled>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="form-group">
            <label>F. Vencimiento</label>
            <input type="text" class="form-control" [value]="funciones.formatDate(credito.fechaVencimiento, 'DD/MM/YYYY')" disabled>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="form-group">
            <label>Monto</label>
            <input type="text" class="form-control" [value]="credito.montoCredito" disabled>
          </div>
        </div>
      </div>
    </section>
    <section [formGroup]="form">
      <h5>Gestión</h5>
      <div class="row">
        <div class="col-12 col-md-6">
          <div class="form-group">
            <label>Tipo Gestión</label>
            <select class="form-control" formControlName="tipoGestion">
              <option *ngFor="let item of gestiones" [value]="item.codItem">{{ item.descripcion }}</option>
            </select>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <label>Tipo Contacto</label>
          <div class="input-group">
            <select class="form-control" formControlName="tipoContacto">
              <option *ngFor="let item of tiposContacto" [value]="item.codItem">{{ item.descripcion }}</option>
            </select>
            <div class="input-group-btn">
              <button *ngIf="!showRespuesta" type="button" class="btn btn-info" (click)="iniciarGestion()">Iniciar</button>
              <button *ngIf="showRespuesta" type="button" class="btn btn-danger" (click)="cancelarGestion()">Cancelar</button>
            </div>
          </div>
        </div>
        <ng-container *ngIf="form.controls.tipoContacto.value == '1' && showRespuesta">
          <div class="col-12 col-md-4">
            <label>Número telefonico</label>
            <div class="input-group">
              <select class="form-control" formControlName="telefono">
                <option value="">Seleccione</option>
                <option *ngFor="let item of showPhones" [value]="item.numero">{{ (item.codCiudad ? item.codCiudad + '-' : '') + item.numero }}</option>
              </select>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="form-group">
              <label>Tiempo(seg)</label>
              <input Number class="form-control" placeholder="Tiempo transcurrido" formControlName="duracion">
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="form.controls.tipoContacto.value == '2' && showRespuesta">
          <div class="col-12 col-md-6">
            <div class="form-group">
              <label>Seleccione Correo</label>
              <select class="form-control" formControlName="correo">
                <option value="">Seleccione</option>
                <option *ngFor="let item of showEmails" [value]="item.email">{{ item.email }}</option>
              </select>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="form.controls.tipoContacto.value == '4' && showRespuesta">
          <div class="col-12 col-md-6">
            <div class="form-group">
              <label>Seleccione Dirección</label>
              <select class="form-control" formControlName="direccion">
                <option value="">Selecione</option>
                <option *ngFor="let item of showAddress" [value]="mostrarDireccion(item)">{{ mostrarDireccion(item)}}</option>
              </select>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="row" *ngIf="showRespuesta">
        <div class="col-12 col-md-4">
          <div class="form-group">
            <label>Respuesta</label>
            <select class="form-control" formControlName="codRespuesta">
              <option *ngFor="let item of respuestas" [value]="item.codItem">{{ item.descripcion }}</option>
            </select>
          </div>
        </div>
        <ng-container *ngIf="showAcuerdoPago">
          <div class="col-12"></div>
          <div class="col-12 col-md-4">
            <ul class="list-group list-acuerdos">
              <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 1}" (click)="typeAcuerdo = 1">AL DÍA</li>
              <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 2}" (click)="typeAcuerdo = 2">PLAN DE PAGO</li>
              <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 3}" (click)="typeAcuerdo = 3">TOTAL DE LA MORA</li>
              <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 4}" (click)="typeAcuerdo = 4">ABONO</li>
            </ul>
          </div>
          <ng-container *ngIf="typeAcuerdo == 1  || typeAcuerdo == 3 || typeAcuerdo == 4" [formGroup]="formRegistrarAcuerdo">
            <div class="col-12 col-md-8">
              <div class="row">
                <div class="col-12" *ngIf="errors.length > 0">
                  <div class="form-group">
                    <div class="alert alert-danger" role="alert" *ngFor="let value of errors">
                      <span><b>.</b> {{ value }}</span>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-md-7">
                  <div class="form-group">
                    <label>Monto Acordado</label>
                    <input CustomizeCurrency type="text" class="form-control" formControlName="montoAcordado">
                  </div>
                </div>
                <div class="col-12 col-md-5">
                  <div class="form-group">
                    <label>Posibilidad Pagar</label>
                    <select class="form-control" formControlName="posibilidadPago">
                      <option value="">Seleccione</option>
                      <option value="1">Alto</option>
                      <option value="2">Medio</option>
                      <option value="3">Bajo</option>
                    </select>
                  </div>
                </div>
                <div class="col-12 col-md-7">
                  <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" class="form-control" formControlName="fechaInicio">
                  </div>
                </div>
                <div class="col-12 col-md-5">
                  <div class="form-group">
                    <label>Hora</label>
                    <input type="time" class="form-control" min="07:00" max="20:00" formControlName="horaIncio">
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="typeAcuerdo == 2" [formGroup]="formPlanPago">
            <div class="col-12 col-md-8">
              <div class="row">
                <div class="col-12" *ngIf="errors.length > 0">
                  <div class="form-group">
                    <div class="alert alert-danger" role="alert" *ngFor="let value of errors">
                      <span><b>.</b> {{ value }}</span>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-group">
                    <label>Nombre del plan</label>
                    <input SoloLetras Uppercase type="text" class="form-control" formControlName="descripcion">
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label>Número de cuotas</label>
                    <input Number type="text" class="form-control" formControlName="plazo">
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label>Valor de cuotas</label>
                    <input CustomizeCurrency type="text" class="form-control" formControlName="montoAcordado">
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label>Intervalo cotas (Días)</label>
                    <input Number type="text" class="form-control" formControlName="intervalo">
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label>Fecha inicio</label>
                    <input type="date" class="form-control" formControlName="fechaInicio">
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-group">
                    <label>Posibilidad Pagar</label>
                    <select class="form-control" formControlName="posibilidadPago">
                      <option value="">Seleccione</option>
                      <option value="1">Alto</option>
                      <option value="2">Medio</option>
                      <option value="3">Bajo</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-container>
        <div class="col-8">
          <label>Comentario</label>
          <div class="input-group">
            <input type="text" class="form-control" formControlName="comentario">
            <div class="input-group-btn">
              <button [disabled]="form.invalid" type="button" class="btn btn-info" (click)="registrarGestion()">Ingresar</button>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section *ngIf="acciones.length > 0">
      <div class="row">
        <h6>Historial de Gestion</h6>
        <div class="col-12">
          <table class="table table-bordered" id="listaGestiones">
            <thead>
            <tr class="text-center">
              <th scope="col">&nbsp;</th>
              <th scope="col">Acción</th>
              <th scope="col">Target</th>
              <th scope="col">Respuesta</th>
              <th scope="col">Comentario</th>
              <th scope="col">Fecha</th>
              <th scope="col">Ejecutivo</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of acciones; let i = index">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ item.gestionDescripcion }}</td>
              <td>{{ item.target }}</td>
              <td>{{ item.respuestaDescripcion }}</td>
              <td> {{item.comentario}}</td>
              <td> {{item.fechaRegistro | date: 'd/M/yyyy'}}</td>
              <td> {{item.ejecutivoNombre}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </div>
</div>
