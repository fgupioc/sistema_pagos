<div class="card section-credito-socio">
  <div class="card-header">
    <i class="fa fa-align-justify"></i>
    <span class="card-title text-uppercase font-weight-bold">Información del socio</span>
    <div class="card-tools float-right">
      <button *ngIf="!role" type="button" class="btn btn-sm btn-primary" [routerLink]="'/auth/estrategia/asignacion-cartera/' + ejecutivoId + '/listado/' + asignacionId+'/detalle'">
        <i class="fa fa-arrow-left"></i> Regresar
      </button>
      <button *ngIf="role" type="button" class="btn btn-sm btn-primary" [routerLink]="'/auth/estrategia/asignacion-cartera/mis-cartera-asignadas/'+asignacionId+'/detalle'">
        <i class="fa fa-arrow-left"></i> Regresar
      </button>
    </div>
  </div>
  <div class="card-body" *ngIf="socio && campania">
    <div class="row" *ngIf="socio.personaNatural">
      <div class="col-12 col-md-3">
        <div class="form-group">
          <label>Primer Apellido</label>
          <input type="text" class="form-control" disabled [value]="socio.personaNatural.primerApellido">
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-group">
          <label>Segundo Apellido</label>
          <input type="text" class="form-control" disabled [value]="socio.personaNatural.segundoApellido">
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-group">
          <label>Primer Nombre</label>
          <input type="text" class="form-control" disabled [value]="socio.personaNatural.primerNombre">
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-group">
          <label>Segundo Nombre</label>
          <input type="text" class="form-control" disabled [value]="socio.personaNatural.segundoNombre">
        </div>
      </div>
    </div>
    <div class="row" *ngIf="credito">
      <div class="col-12 col-md-3">
        <div class="frorm-group">
          <label>Monto Crédito</label>
          <input type="text" class="form-control" [value]="credito.montoCredito | currency : getCodeMoney" disabled>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="frorm-group">
          <label>Monto Cuota</label>
          <input type="text" class="form-control" [value]="credito.montoCuota | currency : getCodeMoney" disabled>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="frorm-group">
          <label>Saldo Capital</label>
          <input type="text" class="form-control" [value]="credito.saldoCapital | currency : getCodeMoney" disabled>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="frorm-group">
          <label>Saldo de Deuda</label>
          <input type="text" class="form-control" [value]="credito.saldoDeDeuda | currency : getCodeMoney" disabled>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-12">
        <div class="form-group mb-0" *ngIf="conPermiso">
          <div class="text-center">
            <a class="btn btn-sm btn-social-icon btn-linkedin mr-2" (click)="crearEventos(1, 'Gestionar Eventos Socio')"><i class="fa fa-plus"></i></a>

            <a [ngbTooltip]="'Crear Recordatorio'" class="btn btn-sm btn-social-icon btn-linkedin mr-2" (click)="crearEventos(4, 'Crear Recordatorio')" placement="top" ngbTooltip="Crear Recordatorio"><i
              class="fa fa-calendar"></i></a>
            <a [ngbTooltip]="'Crear Acuerdo de Pago'" class="btn btn-sm btn-social-icon btn-linkedin mr-2" (click)="crearEventos(5, 'Crear Acuerdos de Pago')"><i class="fa fa-handshake-o"></i></a>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-12 col-md-8">
        <ngb-tabset [destroyOnHide]="false" [activeId]="1" (tabChange)="tabSeleccionado($event)">
          <ngb-tab title="Fijo/Movil" id="1">
            <ng-template ngbTabContent>
              <div class="row">
                <div class="col-12">
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr class="text-center">
                        <th scope="col">#</th>
                        <th scope="col">Número</th>
                        <th scope="col">Operador</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Notificación</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let phone of socio.telefonos; let i = index" class="text-center">
                        <th scope="row">{{ i + 1 }}</th>
                        <td>{{ (phone.codCiudad ? phone.codCiudad +'-' : '') + phone.numero }}</td>
                        <td>{{ phone.operadorDescripcion }}</td>
                        <td>{{ phone.tipoUsoDescripcion }}</td>
                        <td>{{ phone.tipoNotificacion }}</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Correo" id="2">
            <ng-template ngbTabContent>
              <div class="row">
                <div class="col-12">
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr class="text-center">
                        <th scope="col">#</th>
                        <th scope="col">Correo</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Notificación</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr class="text-center" *ngFor="let email of socio.correos; let i = index">
                        <th scope="row">{{ i + 1 }}</th>
                        <td>{{ email.email }}</td>
                        <td>{{ email.tipoUsoDescripcion }}</td>
                        <td>{{ email.tipoNotificacion }}</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Dirección" id="3">
            <ng-template ngbTabContent>
              <div class="row">
                <div class="col-12">
                 <div class="table-responsive">
                   <table class="table table-bordered">
                     <thead>
                     <tr class="text-center">
                       <th scope="col">#</th>
                       <th scope="col">Descripcion</th>
                       <th scope="col">Tipo</th>
                     </tr>
                     </thead>
                     <tbody>
                     <tr class="text-center" *ngFor="let direccion of socio.direcciones; let i = index" style="font-size: 12px">
                       <th scope="row">{{ i + 1 }}</th>
                       <td style="text-align: left">{{ mostrarDireccion(direccion)}}</td>
                       <td>{{ getNameTipoDireccion(direccion.tipoDireccion) }}</td>
                     </tr>
                     </tbody>
                   </table>
                 </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
      <div class="col-12 col-md-4">
        <div class="row">
          <div class="col-12">
            <div class="box box-primary">
              <div class="box-header with-border text-center">
                <h3 class="box-title">{{ title }}</h3>
                <div class="box-tools pull-right">
                  <!--                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>-->
                  <!--                  </button>-->
                  <!--                  <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>-->
                </div>
              </div>
              <!-- /.box-header -->
              <div class="box-body">
                <ng-container *ngIf="typeEvent == 1">
                  <ng-container *ngIf="seccioSeleccionada == '1'">
                    <div class="row" [formGroup]="formTelefono">
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="codTipoNotificacion" (ngModelChange)="cambioSelectTelefono()" [ngClass]="
                              {
                              'is-invalid': formTelefono.controls['codTipoNotificacion'].touched && formTelefono.controls['codTipoNotificacion'].errors
                              }
                              ">
                            <option value="">Tipo Notificacion</option>
                            <option *ngFor="let item of tipoNotificacionesTelefono" [value]="item.codTipoNotificacion">{{ item.nombre }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formTelefono.get('codTipoNotificacion').hasError('required')"> El tipo de notificacion es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="codUso" (ngModelChange)="cambioSelectTelefono()" [ngClass]="
                              {
                              'is-invalid': formTelefono.controls['codUso'].touched && formTelefono.controls['codUso'].errors
                              }
                              ">
                            <option value="">Tipo Uso</option>
                            <option *ngFor="let item of tiposUsoTelefono" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formTelefono.get('codUso').hasError('required')"> El tipo de uso es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="tipo" (ngModelChange)="changeTypeTelefono($event)">
                            <option [value]="$movil">Celular</option>
                            <option [value]="$fijo">Fijo</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="operador" [ngClass]="
            {
            'is-invalid': formTelefono.controls['operador'].touched && formTelefono.controls['operador'].errors
            }
            ">
                            <option value="">Seleccionar</option>
                            <option value="1">Claro</option>
                            <option value="2">Movistar</option>
                            <option value="3">Entel</option>
                            <option value="4">Bitel</option>
                          </select>
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formTelefono.get('operador').hasError('required')"> El operador es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div  class="col-12 col-md-6" *ngIf="typePhone == $fijo">
                        <div class="form-group">
                          <input Number type="text" class="form-control" placeholder="codCiudad" formControlName="codCiudad" maxlength="3" [ngClass]="
            {
            'is-invalid': formTelefono.controls['codCiudad'].touched && formTelefono.controls['codCiudad'].errors
            }
            ">
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formTelefono.get('codCiudad').hasError('required')"> El código ciudad es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div  [class]="typePhone == $movil ? 'col-12' : 'col-12 col-md-6'">
                        <div class="form-group">
                          <input Number type="text" class="form-control" placeholder="Número Telefóno" [maxlength]="max" formControlName="numero" [ngClass]="
            {
            'is-invalid': formTelefono.controls['numero'].touched && formTelefono.controls['numero'].errors
            }
            ">

                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formTelefono.get('numero').hasError('required')"> El número de telefono es obligatorio.</span>
                            <span class="d-block" *ngIf="formTelefono.get('numero').hasError('minlength')"> El número solo acepta {{ max }} caracteres.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group text-center">
                          <button *ngIf="create" type="button" class="btn btn-success" [disabled]="formTelefono.invalid" (click)="guardarTetefono()">Guardar</button>
                          <button *ngIf="!create" type="button" class="btn btn-primary" [disabled]="formTelefono.invalid" (click)="actualizarTelefono()"><i class="fa fa-edit"></i></button>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="seccioSeleccionada == '2'">
                    <div class="row" [formGroup]="formCorreo">
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="codTipoNotificacion" (ngModelChange)="cambioSelectEmails()" [ngClass]="
            {
            'is-invalid': formCorreo.controls['codTipoNotificacion'].touched && formCorreo.controls['codTipoNotificacion'].errors
            }
            ">
                            <option value="">Seleccione</option>
                            <option *ngFor="let item of tipoNotificacionesEmails" [value]="item.codTipoNotificacion">{{ item.nombre }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formCorreo.get('codTipoNotificacion').hasError('required')"> El tipo de notificacion es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <select class="form-control" formControlName="codUso" [ngClass]="
                              {
                              'is-invalid': formCorreo.controls['codUso'].touched && formCorreo.controls['codUso'].errors
                              }
                              ">
                            <option value="">Tipo Uso</option>
                            <option *ngFor="let item of tipoUsoEmail" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formCorreo.get('codUso').hasError('required')"> El tipo de uso es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group mb-3">
                          <input Uppercase type="email" class="form-control" placeholder="Correo electrónico" formControlName="email" [ngClass]="
                          {
                          'is-invalid': formCorreo.controls['email'].touched && formCorreo.controls['email'].errors
                          }
                          ">

                          <div class="invalid-feedback">
                            <span class="d-block" *ngIf="formCorreo.get('email').hasError('required')"> El corre electrónico es obligatorio.</span>
                            <span class="d-block" *ngIf="formCorreo.get('email').hasError('email')">El correo electrónico no es válido.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 text-center">
                        <button *ngIf="create" type="button" class="btn btn-success" (click)="guardarEmail()" [disabled]="formCorreo.invalid">Guardar</button>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container  *ngIf="seccioSeleccionada == '3'">
                    <div class="row area-direccion" [formGroup]="formDireccion">
                      <div class="col-12">
                        <div class="form-group">
                          <label>Tipo Dirección</label>
                          <select class="form-control" formControlName="tipoDireccion" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoDireccion'].touched && formDireccion.controls['tipoDireccion'].errors,
                            'is-valid': formDireccion.controls['tipoDireccion'].touched && !formDireccion.controls['tipoDireccion'].errors
                             }">
                            <option *ngFor="let item of tipoDirecciones" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoDireccion').hasError('required')">El campo tipo de dirección es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Tipo Vivienda</label>
                          <select class="form-control" formControlName="tipoVivienda" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoVivienda'].touched && formDireccion.controls['tipoVivienda'].errors,
                            'is-valid': formDireccion.controls['tipoVivienda'].touched && !formDireccion.controls['tipoVivienda'].errors
                             }">
                            <option *ngFor="let item of tipoViviendas" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoVivienda').hasError('required')">El campo tipo vivienda es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Tipo Vía</label>
                          <select class="form-control" formControlName="tipoVia" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoVia'].touched && formDireccion.controls['tipoVia'].errors,
                            'is-valid': formDireccion.controls['tipoVia'].touched && !formDireccion.controls['tipoVia'].errors
                             }">
                            <option *ngFor="let item of tipoVias" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoVia').hasError('required')">El campo tipo de via es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Nombre Via</label>
                          <input Uppercase type="text" class="form-control" formControlName="nombreVia" max="100" [ngClass]="{
                            'is-invalid': formDireccion.controls['nombreVia'].touched && formDireccion.controls['nombreVia'].errors,
                            'is-valid': formDireccion.controls['nombreVia'].touched && !formDireccion.controls['nombreVia'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('nombreVia').hasError('required')">El campo nombre de la via es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label>Nro.</label>
                          <input Number type="text" class="form-control" formControlName="numero" maxlength="4" [ngClass]="{
                            'is-invalid': formDireccion.controls['numero'].touched && formDireccion.controls['numero'].errors,
                            'is-valid': formDireccion.controls['numero'].touched && !formDireccion.controls['numero'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('numero').hasError('required')">El campo número es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-4">
                        <div class="form-group">
                          <label>Mz.</label>
                          <input Uppercase type="text" class="form-control" formControlName="manzana" maxlength="4" (change)="cambioManzana($event)" [ngClass]="{
                            'is-invalid': formDireccion.controls['manzana'].touched && formDireccion.controls['manzana'].errors,
                            'is-valid': formDireccion.controls['manzana'].touched && !formDireccion.controls['manzana'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('manzana').hasError('required')">El campo manzána es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-4">
                        <div class="form-group">
                          <label>Lt.</label>
                          <input Number type="text" class="form-control" formControlName="lote" maxlength="4" [ngClass]="{
                            'is-invalid': formDireccion.controls['lote'].touched && formDireccion.controls['lote'].errors,
                            'is-valid': formDireccion.controls['lote'].touched && !formDireccion.controls['lote'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('lote').hasError('required')">El campo lóte es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Tipo Sección</label>
                          <select class="form-control" formControlName="tipoSeccion" (change)="cambioTipoSeccion($event)" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoSeccion'].touched && formDireccion.controls['tipoSeccion'].errors,
                            'is-valid': formDireccion.controls['tipoSeccion'].touched && !formDireccion.controls['tipoSeccion'].errors
                             }">
                            <option [value]="0">&nbsp;</option>
                            <option *ngFor="let item of tipoSecciones" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoSeccion').hasError('required')">El campo tipo de sección es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Número <span>{{ $sectionName }}</span></label>
                          <input Number type="text" class="form-control" formControlName="numeroSeccion" maxlength="4" [ngClass]="{
                            'is-invalid': formDireccion.controls['numeroSeccion'].touched && formDireccion.controls['numeroSeccion'].errors,
                            'is-valid': formDireccion.controls['numeroSeccion'].touched && !formDireccion.controls['numeroSeccion'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('numeroSeccion').hasError('required')">El campo número de sección es obligatorio.</span>
                            <span *ngIf="formDireccion.get('numeroSeccion').hasError('pattern')">El campo solo acepta números.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Tipo Zona</label>
                          <select class="form-control" formControlName="tipoZona" (change)="cambioTipoZona($event)" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoZona'].touched && formDireccion.controls['tipoZona'].errors,
                            'is-valid': formDireccion.controls['tipoZona'].touched && !formDireccion.controls['tipoZona'].errors
                             }">
                            <option *ngFor="let item of tipoZonas" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoZona').hasError('required')">El campo tipo de zona es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Nombre <span>{{ $zoneName }}</span></label>
                          <input Uppercase type="text" class="form-control" formControlName="nombreZona" max="100" [ngClass]="{
                            'is-invalid': formDireccion.controls['nombreZona'].touched && formDireccion.controls['nombreZona'].errors,
                            'is-valid': formDireccion.controls['nombreZona'].touched && !formDireccion.controls['nombreZona'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('nombreZona').hasError('required')">El campo nombre de zona es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Tipo Sector</label>
                          <select class="form-control" formControlName="tipoSector" (change)="cambioTipoSector($event)" [ngClass]="{
                            'is-invalid': formDireccion.controls['tipoSector'].touched && formDireccion.controls['tipoSector'].errors,
                            'is-valid': formDireccion.controls['tipoSector'].touched && !formDireccion.controls['tipoSector'].errors
                             }">
                            <option [value]="0">&nbsp;</option>
                            <option *ngFor="let item of tiposSectores" [value]="item.codItem">{{ item.descripcion }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('tipoSector').hasError('required')">El campo tipo de sector es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Nombre <span>{{ $sectorName }}</span></label>
                          <input Uppercase type="text" class="form-control" formControlName="nombreSector" max="100" [ngClass]="{
                            'is-invalid': formDireccion.controls['nombreSector'].touched && formDireccion.controls['nombreSector'].errors,
                            'is-valid': formDireccion.controls['nombreSector'].touched && !formDireccion.controls['nombreSector'].errors
                             }">
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('nombreSector').hasError('required')">El campo nombre de sector es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Departamento</label>
                          <select class="form-control" formControlName="departamento" (change)="listarProvincias()" [ngClass]="{
                            'is-invalid': formDireccion.controls['departamento'].touched && formDireccion.controls['departamento'].errors,
                            'is-valid': formDireccion.controls['departamento'].touched && !formDireccion.controls['departamento'].errors
                             }">
                            <option *ngFor="let item of departamentos"
                                    [value]="item.codDepartamento">{{ item.descripcion.toUpperCase() }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('departamento').hasError('required')">El campo departamento es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Provincia</label>
                          <select class="form-control" formControlName="provincia" (change)="listarDistritos()" [ngClass]="{
                            'is-invalid': formDireccion.controls['provincia'].touched && formDireccion.controls['provincia'].errors,
                            'is-valid': formDireccion.controls['provincia'].touched && !formDireccion.controls['provincia'].errors
                             }">
                            <option *ngFor="let item of provincias"
                                    [value]="item.codProvincia">{{ item.descripcion.toUpperCase() }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('provincia').hasError('required')">El campo provincia es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Distrito</label>
                          <select class="form-control" formControlName="distrito" [ngClass]="{
                            'is-invalid': formDireccion.controls['distrito'].touched && formDireccion.controls['distrito'].errors,
                            'is-valid': formDireccion.controls['distrito'].touched && !formDireccion.controls['distrito'].errors
                             }">
                            <option *ngFor="let item of distritos"
                                    [value]="item.codDistrito">{{ item.descripcion.toUpperCase() }}</option>
                          </select>
                          <div class="invalid-feedback">
                            <span *ngIf="formDireccion.get('distrito').hasError('required')">El campo distrito es obligatorio.</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                     <div class="col-12 text-center">
                       <div class="form-group m-0 mt-2">
                         <button class="btn btn-sm btn-primary" [disabled]="formDireccion.invalid" (click)="guardarDireccion()"> guardar</button>
                       </div>
                     </div>
                    </div>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="typeEvent == 4" [formGroup]="formRecordatorio">
                  <div class="row">
                    <div class="col-12 col-md-7">
                      <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" class="form-control" formControlName="fecha">
                      </div>
                    </div>
                    <div class="col-12 col-md-5">
                      <div class="form-group">
                        <label>Hora</label>
                        <input type="time" class="form-control" formControlName="hora" min="07:00" max="20:00">
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="form-group">
                        <label>Seleccione la actividad</label>
                        <select class="form-control" formControlName="tipoActividad" (ngModelChange)="showItem = $event">
                          <option value="">Selecione</option>
                          <option *ngFor="let item of tipoActividades" [value]="item.codItem">{{ item.descripcion }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-12" *ngIf="showItem == '1'">
                      <div class="form-group">
                        <label>Seleccione número</label>
                        <select class="form-control" formControlName="numeroTelefono">
                          <option>Selecione</option>
                          <option *ngFor="let item of showPhones" [value]="item.numero">{{ (item.codCiudad ? item.codCiudad +'-' : '') +  item.numero }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-12" *ngIf="showItem == '2'">
                      <div class="form-group">
                        <label>Seleccione Correo</label>
                        <select class="form-control" formControlName="correo">
                          <option>Selecione</option>
                          <option *ngFor="let item of showEmails" [value]="item.email">{{ item.email }}</option>
                        </select>
                      </div>
                    </div>
                    <ng-container *ngIf="showItem == '3'">
                      <div class="col-12">
                        <div class="form-group">
                          <label>Seleccione Metodo</label>
                          <select #metodo class="form-control" formControlName="tipoMetodo" (ngModelChange)="cambioTipoMetodo($event)">
                            <option value="">Selecione</option>
                            <option *ngFor="let item of listadoMensaje" [value]="item.nombre">{{ item.nombre }}</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-12" *ngIf="showCellphones != ''">
                        <div class="form-group">
                          <label>Seleccione número</label>
                          <select class="form-control" formControlName="numeroTelefono">
                            <option value="">Selecione</option>
                            <option *ngFor="let item of $telefonos" [value]="item.numero">{{ item.numero }}</option>
                          </select>
                        </div>
                      </div>
                    </ng-container>
                    <div class="col-12" *ngIf="showItem == '4'">
                      <div class="form-group">
                        <label>Seleccione Dirección</label>
                        <select class="form-control" formControlName="direccion">
                          <option>Selecione</option>
                          <option *ngFor="let item of showAddress" [value]="item.nombreVia">{{ item.nombreVia }}</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="form-group">
                        <label>Comentario</label>
                        <textarea class="form-control" formControlName="comentario"></textarea>
                      </div>
                    </div>
                    <div class="col-12 text-center">
                      <div class="btn-group ">
                        <button class="btn btn-sm btn-primary" [disabled]="formRecordatorio.invalid" (click)="guardarRecordatorio()">Guardar</button>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <ng-container *ngIf="typeEvent == 5">
                  <div class="row">
                    <div class="col-12">
                      <ul class="list-group list-acuerdos">
                        <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 1}" (click)="typeAcuerdo = 1">AL DÍA</li>
                        <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 2}" (click)="typeAcuerdo = 2">PLAN DE PAGO</li>
                        <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 3}" (click)="typeAcuerdo = 3">TOTAL DE LA MORA</li>
                        <li class="list-group-item" [ngClass]="{'active': typeAcuerdo == 4}" (click)="typeAcuerdo = 4">ABONO</li>
                      </ul>
                    </div>
                  </div>
                  <hr>
                  <ng-container *ngIf="typeAcuerdo == 1  || typeAcuerdo == 3 || typeAcuerdo == 4" [formGroup]="formRegistrarAcuerdo">
                    <div class="row mt-4">
                      <div class="col-12 text-center">
                        <h4>Registrar Acuerdo</h4>
                      </div>
                      <div class="col-12" *ngIf="errors.length > 0">
                        <div class="form-group">
                          <div class="alert alert-danger" role="alert" *ngFor="let value of errors">
                            <span><b>.</b> {{ value }}</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-7">
                        <div class="form-group">
                          <label>Monto Acordado</label>
                          <input CustomizeCurrency type="text" class="form-control" formControlName="montoAcordado">
                        </div>
                      </div>
                      <div class="col-12 col-md-5">
                        <div class="form-group">
                          <label>Posibilidad Pagar</label>
                          <select class="form-control" formControlName="posibilidadPago">
                            <option value="">Seleccione</option>
                            <option value="1">Alto</option>
                            <option value="2">Medio</option>
                            <option value="3">Bajo</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-12 col-md-7">
                        <div class="form-group">
                          <label>Fecha</label>
                          <input type="date" class="form-control" formControlName="fechaInicio">
                        </div>
                      </div>
                      <div class="col-12 col-md-5">
                        <div class="form-group">
                          <label>Hora</label>
                          <input type="time" class="form-control" min="07:00" max="20:00" formControlName="horaIncio">
                        </div>
                      </div>
                      <div class="col-12 text-center">
                        <button class="btn btn-sm btn-primary" [disabled]="formRegistrarAcuerdo.invalid" (click)="guardarAcuerdo()">Registrar</button>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="typeAcuerdo == 2" [formGroup]="formPlanPago">
                    <div class="body-acuerdo row mt-4">
                      <div class="col-12 text-center">
                        <h4>Crear plan de pago</h4>
                      </div>
                      <div class="col-12" *ngIf="errors.length > 0">
                        <div class="form-group">
                          <div class="alert alert-danger" role="alert" *ngFor="let value of errors">
                            <span><b>.</b> {{ value }}</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Nombre del plan</label>
                          <input SoloLetras Uppercase type="text" class="form-control" formControlName="descripcion">
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Número de cuotas</label>
                          <input Number type="text" class="form-control" formControlName="plazo">
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Valor de cuotas</label>
                          <input CustomizeCurrency type="text" class="form-control" formControlName="montoAcordado">
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Intervalo cotas (Días)</label>
                          <input Number type="text" class="form-control" formControlName="intervalo">
                        </div>
                      </div>
                      <div class="col-12 col-md-6">
                        <div class="form-group">
                          <label>Fecha inicio</label>
                          <input type="date" class="form-control" formControlName="fechaInicio">
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <label>Posibilidad Pagar</label>
                          <select class="form-control" formControlName="posibilidadPago">
                            <option value="">Seleccione</option>
                            <option value="1">Alto</option>
                            <option value="2">Medio</option>
                            <option value="3">Bajo</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-12 text-center">
                        <button class="btn btn-sm btn-primary" [disabled]="formPlanPago.invalid" (click)="guardarPlanPago()">Registrar</button>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-12">
        <ngb-accordion [closeOthers]="true">
          <ngb-panel>
            <ng-template ngbPanelTitle>
              <span><b>Recordatorio</b></span>
            </ng-template>
            <ng-template ngbPanelContent>
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                  <tr class="text-center">
                    <th>Actividad</th>
                    <th>Fecha/hora</th>
                    <th>Descrpción</th>
                    <th>Mensaje</th>
                    <th>Condición</th>
                    <th>Opcipon</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let item of recordatorios"  [class]="isCurrentDate(item.fecha, item.condicion)" style="font-size: 12px; text-align: center">
                    <td>
                      <ng-container *ngIf="!item.observacion; else obsetvation">
                        {{ getNameActividad(item.tipoActividad) }}
                      </ng-container>

                      <ng-template #obsetvation>
                        <ng-template #tipContent><b>{{item.observacion}}</b></ng-template>
                        <span> <b triggers="click" [autoClose]="'outside'" [ngbTooltip]="tipContent" class="cursor-pointer" style="font-size: 18px"><i class="fa  fa-question-circle"></i></b> {{ getNameActividad(item.tipoActividad) }} </span>
                      </ng-template>
                    </td>
                    <td> {{ item.fecha | date: 'dd/MM/yyyy' }} {{ item.hora   }}</td>
                    <td> {{ getDescripcion(item) }}</td>
                    <td style="text-align: left;"> {{ item.comentario }}</td>
                    <td> {{ getNameCondition(item.condicion) }}</td>
                    <td>
                      <button *ngIf="conPermiso" class="btn btn-sm btn-success" (click)="cambiarEstado(item)"><i class="fa fa-check"></i></button>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-panel>
          <ngb-panel>
            <ng-template ngbPanelTitle>
              <span><b>Acuerdos</b></span>
            </ng-template>
            <ng-template ngbPanelContent>
              <div class="table-responsive">
                <table id="tabla-acuerdos" class="table table-bordered table-hover">
                  <thead>
                  <tr class="text-center">
                    <th>Fecha</th>
                    <th>Monto</th>
                    <th>T. Acuerdo</th>
                    <th>Estado</th>
                    <th>Tipo</th>
                    <th>Cuota</th>
                    <th>Plazo</th>
                    <th>Opcipon</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let item of acuerdosPago"  [class]="isCurrentDate(item.fechaInicio, item.condicion)" style="font-size: 12px; text-align: center">
                    <td>
                      {{ item.fechaInicio | date: 'dd/MM/yyyy' }}
                    </td>
                    <td>{{ item.montoAcordado  | currency: 'S/ ' }} </td>
                    <td>{{ getNameTipoAcuerdo(item.tipoAcuerdo) }}</td>
                    <td>{{ getNameCondition(item.condicion) | uppercase}}</td>
                    <td>{{ item.descripcion | uppercase}}</td>
                    <td>{{ item.cuota }}</td>
                    <td>{{ item.plazo }}</td>
                    <td>
                      <button *ngIf="conPermiso" [disabled]="isAfter(item.fechaInicio)" class="btn btn-sm btn-danger" (click)="eliminarAcuerdoPago(item)"><i class="fa fa-trash"></i></button>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-panel>
        </ngb-accordion>
      </div>
    </div>
  </div>
</div>
<app-loading></app-loading>
